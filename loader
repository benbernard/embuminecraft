local args = {...}
local file = args[1]

function loadScript(file, dir)
    print("Loading " .. file)
    local request = http.get("https://raw.github.com/benbernard/embuminecraft/master/" .. file)

    if not fs.exists(dir) then
        print("Directory does not exist " .. dir)
        return
    end

    local_file = dir .. "/" .. file
    print("Writing " .. local_file)
    handle = fs.open(local_file, "w")
    handle.write(request.readAll())
    handle.close()
end

if args[2] == nil then
    dirs = { '/', '/disk' }
else
    dirs = { args[2] }
end

for i,dir in ipairs(dirs) do
    if file == "all" then
        loadScript("kill", dir)
        loadScript("fuel-status", dir)
        loadScript("mov", dir)
        loadScript("return-to-base", dir)
        loadScript("loader", dir)
        loadScript("startup", dir)
    else
        loadScript(file, dir)
    end
end
